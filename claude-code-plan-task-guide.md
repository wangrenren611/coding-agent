# Claude Code - Plan ä¸ Task å·¥å…·å®Œå…¨æŒ‡å—

> æ–‡æ¡£ç”Ÿæˆæ—¶é—´ï¼š2026-01-31
> é€‚ç”¨ç‰ˆæœ¬ï¼šClaude Code (glm-4.7)

---

## ç›®å½•

1. [EnterPlanMode å·¥å…·](#ä¸€-enterplanmode-å·¥å…·)
2. [Task å·¥å…·](#äºŒ-task-å·¥å…·)
3. [ä¸¤è€…çš„åŒºåˆ«ä¸å¯¹æ¯”](#ä¸‰-enterplanmode-vs-taskplan-çš„åŒºåˆ«)
4. [å†³ç­–æµç¨‹å›¾](#å››å†³ç­–æµç¨‹å›¾)
5. [å®æˆ˜ç¤ºä¾‹](#äº”å®æˆ˜ç¤ºä¾‹)

---

## ä¸€ã€EnterPlanMode å·¥å…·

### 1.1 ç³»ç»Ÿæç¤ºè¯ï¼ˆå®Œæ•´åŸæ–‡ï¼‰

```
 Use this tool proactively when you're about to start a non-trivial implementation task. Getting user sign-off on your
  approach before writing code prevents wasted effort and ensures alignment.

  ## When to Use This Tool

  **Prefer using EnterPlanMode** for implementation tasks unless they're simple. Use it when ANY of these conditions apply:

  1. **New Feature Implementation**: Adding meaningful new functionality
     - Example: "Add a logout button" - where should it go? What should happen on click?
     - Example: "Add form validation" - what rules? What error messages?

  2. **Multiple Valid Approaches**: The task can be solved in several different ways
     - Example: "Add caching to the API" - could use Redis, in-memory, file-based, etc.
     - Example: "Improve performance" - many optimization strategies possible

  3. **Code Modifications**: Changes that affect existing behavior or structure
     - Example: "Update the login flow" - what exactly should change?
     - Example: "Refactor this component" - what's the target architecture?

  4. **Architectural Decisions**: The task requires choosing between patterns or technologies
     - Example: "Add real-time updates" - WebSockets vs SSE vs polling
     - Example: "Implement state management" - Redux vs Context vs custom solution

  5. **Multi-File Changes**: The task will likely touch more than 2-3 files
     - Example: "Refactor the authentication system"
     - Example: "Add a new API endpoint with tests"

  6. **Unclear Requirements**: You need to explore before understanding the full scope
     - Example: "Make the app faster" - need to profile and identify bottlenecks
     - Example: "Fix the bug in checkout" - need to investigate root cause

  7. **User Preferences Matter**: The implementation could reasonably go multiple ways
     - If you would use AskUserQuestion to clarify the approach, use EnterPlanMode instead

  ## What Happens in Plan Mode

  In plan mode, you'll:
  1. Thoroughly explore the codebase using Glob, Grep, and Read tools
  2. Understand existing patterns and architecture
  3. Design an implementation approach
  4. Present your plan to the user for approval
  5. Use AskUserQuestion if you need to clarify approaches
  6. Exit plan mode with ExitPlanMode when ready to implement

  ## When NOT to Use This Tool

  Only skip EnterPlanMode for simple tasks:
  - Single-line or few-line fixes (typos, obvious bugs, small tweaks)
  - Adding a single function with clear requirements
  - Tasks where the user has given very specific, detailed instructions
  - Pure research/exploration tasks (use the Task tool with explore agent instead)

  ## Important Notes

  - This tool REQUIRES user approval - they must consent to entering plan mode
  - If unsure whether to use it, err on the side of planning
  - Users appreciate being consulted before significant changes are made to their codebase
```

### 1.2 æ ¸å¿ƒä½œç”¨

**è®© Claude Code è¿›å…¥"è®¡åˆ’æ¨¡å¼"**ï¼Œåœ¨å®ç°å¤æ‚ä»»åŠ¡å‰å…ˆè®¾è®¡æ–¹æ¡ˆå¹¶è·å¾—ç”¨æˆ·æ‰¹å‡†ã€‚

### 1.3 ä»€ä¹ˆæ—¶å€™è°ƒç”¨ EnterPlanMode

å½“æ»¡è¶³ä»¥ä¸‹**ä»»ä¸€æ¡ä»¶**æ—¶ï¼Œåº”ä½¿ç”¨ EnterPlanModeï¼š

| # | æ¡ä»¶ç±»åˆ« | è¯´æ˜ | ç¤ºä¾‹ |
|---|----------|------|------|
| 1 | **æ–°åŠŸèƒ½å®ç°** | æ·»åŠ é‡è¦çš„æ–°åŠŸèƒ½ | "æ·»åŠ ç”¨æˆ·ç™»å‡ºæŒ‰é’®" - ä½ç½®åœ¨å“ªï¼Ÿç‚¹å‡»åå‘ç”Ÿä»€ä¹ˆï¼Ÿ |
| 2 | **å¤šç§å¯è¡Œæ–¹æ¡ˆ** | ä»»åŠ¡å¯ä»¥ç”¨å¤šç§ä¸åŒæ–¹å¼è§£å†³ | "ç»™APIæ·»åŠ ç¼“å­˜" - å¯ç”¨ Redisã€å†…å­˜ã€æ–‡ä»¶ç³»ç»Ÿç­‰ |
| 3 | **ä»£ç ä¿®æ”¹** | å½±å“ç°æœ‰è¡Œä¸ºæˆ–ç»“æ„çš„æ›´æ”¹ | "æ›´æ–°ç™»å½•æµç¨‹" - å…·ä½“æ”¹ä»€ä¹ˆï¼Ÿä¿ç•™ä»€ä¹ˆï¼Ÿ |
| 4 | **æ¶æ„å†³ç­–** | éœ€è¦åœ¨æ¨¡å¼æˆ–æŠ€æœ¯é—´é€‰æ‹© | "æ·»åŠ å®æ—¶æ›´æ–°" - WebSockets vs SSE vs è½®è¯¢ï¼Ÿ |
| 5 | **å¤šæ–‡ä»¶æ”¹åŠ¨** | å¯èƒ½å½±å“è¶…è¿‡ 2-3 ä¸ªæ–‡ä»¶ | "é‡æ„è®¤è¯ç³»ç»Ÿ" / "æ·»åŠ æ–°APIç«¯ç‚¹å’Œæµ‹è¯•" |
| 6 | **éœ€æ±‚ä¸æ˜ç¡®** | éœ€è¦æ¢ç´¢æ‰èƒ½ç†è§£å®Œæ•´èŒƒå›´ | "è®©åº”ç”¨æ›´å¿«" - éœ€è¦å…ˆåˆ†æç“¶é¢ˆ<br>"ä¿®å¤ç»“è´¦bug" - éœ€è¦è°ƒæŸ¥æ ¹å›  |
| 7 | **ç”¨æˆ·åå¥½é‡è¦** | å¤šç§åˆç†å®ç°æ–¹å¼å­˜åœ¨ | å¦‚æœä½ æƒ³ç”¨ AskUserQuestion æ¾„æ¸…æ–¹æ¡ˆï¼Œç”¨ EnterPlanMode ä»£æ›¿ |

### 1.4 ä»€ä¹ˆæ—¶å€™**ä¸**è°ƒç”¨ EnterPlanMode

| # | æ¡ä»¶ | ç¤ºä¾‹ |
|---|------|------|
| âŒ | å•è¡Œæˆ–å‡ è¡Œä¿®å¤ | æ‹¼å†™é”™è¯¯ã€æ˜æ˜¾çš„bugã€å°è°ƒæ•´ |
| âŒ | æ·»åŠ å•ä¸ªå‡½æ•°ä¸”éœ€æ±‚æ˜ç¡® | |
| âŒ | ç”¨æˆ·ç»™å‡ºéå¸¸å…·ä½“è¯¦ç»†çš„æŒ‡ä»¤ | |
| âŒ | çº¯ç ”ç©¶/æ¢ç´¢ä»»åŠ¡ | åº”ä½¿ç”¨ `Task` å·¥å…· + `Explore` ä»£ç† |

### 1.5 è®¡åˆ’æ¨¡å¼ä¸‹çš„å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        è®¡åˆ’æ¨¡å¼å·¥ä½œæµç¨‹                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. ç”¨æˆ·æ‰¹å‡†è¿›å…¥è®¡åˆ’æ¨¡å¼                                         â”‚
â”‚                      â†“                                          â”‚
â”‚  2. ä½¿ç”¨ Globã€Grepã€Read å·¥å…·å½»åº•æ¢ç´¢ä»£ç åº“                    â”‚
â”‚                      â†“                                          â”‚
â”‚  3. ç†è§£ç°æœ‰æ¨¡å¼å’Œæ¶æ„                                          â”‚
â”‚                      â†“                                          â”‚
â”‚  4. è®¾è®¡å®ç°æ–¹æ¡ˆ                                                â”‚
â”‚                      â†“                                          â”‚
â”‚  5. å¦‚éœ€æ¾„æ¸…ï¼Œä½¿ç”¨ AskUserQuestion                              â”‚
â”‚                      â†“                                          â”‚
â”‚  6. ä½¿ç”¨ ExitPlanMode æäº¤è®¡åˆ’ä¾›ç”¨æˆ·å®¡æ‰¹                        â”‚
â”‚                      â†“                                          â”‚
â”‚  7. ç”¨æˆ·æ‰¹å‡†åå¼€å§‹å®ç°                                          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.6 é‡è¦åŸåˆ™

> **"If unsure whether to use it, err on the side of planning."**
>
> å¦‚æœä¸ç¡®å®šæ˜¯å¦ä½¿ç”¨ï¼Œå€¾å‘äºä½¿ç”¨è®¡åˆ’æ¨¡å¼ã€‚
>
> ç”¨æˆ·ä¼šæ„Ÿæ¿€åœ¨å¯¹å…¶ä»£ç åº“è¿›è¡Œé‡å¤§æ›´æ”¹å‰è¢«å¾è¯¢æ„è§ã€‚

---

## äºŒã€Task å·¥å…·

### 2.1 ç³»ç»Ÿæç¤ºè¯ï¼ˆæ ¸å¿ƒåŸæ–‡ï¼‰

```
 The Task tool launches specialized agents (subprocesses) that autonomously handle complex tasks. Each agent type has
  specific capabilities and tools available to it.

  Available agent types:
  - Bash: Command execution specialist (git, terminal tasks)
  - general-purpose: Researching complex questions, searching code, multi-step tasks
  - Explore: Fast agent for exploring codebases (find files by patterns, search keywords, answer questions)
  - Plan: Software architect agent for designing implementation plans
  - claude-code-guide: Questions about Claude Code features, Agent SDK, Claude API
  - ui-sketcher: Transforms requirements into visual ASCII interface designs
  - bug-analyzer: Debugging specialist for execution flow analysis and root cause investigation
  - code-reviewer: Elite code review expert for security, performance, production reliability

  Usage notes:
  - Launch multiple agents concurrently for maximum performance
  - If you want to read a specific file path, use the Read or Glob tool instead
  - When NOT to use the Task tool: Direct file operations, single-file code searches
  - IMPORTANT: When searching for a keyword or file and you are not confident you will find the right match in the first few
   tries, use the Task tool

  IMPORTANT: Use the Task tool with subagent_type=Explore instead of running search commands directly when exploring the
  codebase to gather context or answer questions that are not a needle query for a specific file/class/function.
```

### 2.2 æ ¸å¿ƒä½œç”¨

**å¯åŠ¨ä¸“é—¨çš„å­ä»£ç†**æ¥å¤„ç†ç‰¹å®šç±»å‹çš„å¤æ‚ä»»åŠ¡ã€‚æ¯ä¸ªä»£ç†ç±»å‹æœ‰ä¸“é—¨çš„å·¥å…·å’Œèƒ½åŠ›ã€‚

### 2.3 å¯ç”¨çš„ä»£ç†ç±»å‹

| ä»£ç†ç±»å‹ | ç”¨é€”æè¿° | å¯ç”¨å·¥å…· |
|----------|----------|----------|
| **`Bash`** | å‘½ä»¤æ‰§è¡Œä¸“å®¶ï¼ˆgitæ“ä½œã€ç»ˆç«¯ä»»åŠ¡ï¼‰ | Bash |
| **`general-purpose`** | é€šç”¨ä»£ç†ï¼ˆå¤æ‚é—®é¢˜ç ”ç©¶ã€ä»£ç æœç´¢ã€å¤šæ­¥éª¤ä»»åŠ¡ï¼‰ | * (å…¨éƒ¨å·¥å…·) |
| **`Explore`** | å¿«é€Ÿæ¢ç´¢ä»£ç åº“ï¼ˆæŒ‰æ¨¡å¼æ‰¾æ–‡ä»¶ã€æœç´¢å…³é”®è¯ã€å›ç­”ä»£ç åº“é—®é¢˜ï¼‰ | é™¤ Task/Edit/Write/NotebookEdit å¤–çš„å…¨éƒ¨ |
| **`Plan`** | è½¯ä»¶æ¶æ„å¸ˆï¼ˆè®¾è®¡å®ç°è®¡åˆ’ï¼‰ | é™¤ Task/Edit/Write/NotebookEdit å¤–çš„å…¨éƒ¨ |
| **`claude-code-guide`** | Claude Code / Agent SDK / Claude API é—®é¢˜ | Glob, Grep, Read, WebFetch, WebSearch |
| **`ui-sketcher`** | å°†éœ€æ±‚è½¬æ¢ä¸ºå¯è§†åŒ– ASCII ç•Œé¢è®¾è®¡ | Bash, Glob, Grep, Read, WebFetch, TodoWrite, WebSearch, BashOutput, KillShell, ListMcpResourcesTool, ReadMcpResourceTool |
| **`bug-analyzer`** | è°ƒè¯•ä¸“å®¶ï¼ˆæ‰§è¡Œæµç¨‹åˆ†æã€æ ¹å› è°ƒæŸ¥ï¼‰ | read_file, write_file, run_bash_command, search_files, grep |
| **`code-reviewer`** | ä»£ç å®¡æŸ¥ä¸“å®¶ï¼ˆå®‰å…¨ã€æ€§èƒ½ã€ç”Ÿäº§å¯é æ€§ï¼‰ | * (å…¨éƒ¨å·¥å…·) |

### 2.4 ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ Task å·¥å…·

| åœºæ™¯ | æ¨èä»£ç†ç±»å‹ | è¯´æ˜ |
|------|-------------|------|
| æ¢ç´¢ä»£ç åº“ç»“æ„ | `Explore` | éç²¾ç¡®æ–‡ä»¶æŸ¥è¯¢æ—¶ |
| æœç´¢å…³é”®è¯/æ–‡ä»¶ï¼Œä¸ç¡®å®šç¬¬ä¸€æ¬¡å°±èƒ½æ‰¾åˆ° | `Explore` æˆ– `general-purpose` | éœ€è¦å¤šè½®æœç´¢æ—¶ |
| ä»£ç å®¡æŸ¥ï¼ˆå®‰å…¨ã€æ€§èƒ½ï¼‰ | `code-reviewer` | **ä¸»åŠ¨ä½¿ç”¨**ï¼Œä»£ç è´¨é‡ä¿è¯ |
| è°ƒè¯•/æ ¹å› åˆ†æ | `bug-analyzer` | æ·±åº¦æ‰§è¡Œæµç¨‹åˆ†ææ—¶ |
| UI è®¾è®¡è‰å›¾ | `ui-sketcher` | éœ€è¦å¯è§†åŒ–ç•Œé¢è®¾è®¡æ—¶ |
| è®¾è®¡å®ç°è®¡åˆ’ | `Plan` | è®©ä¸“ä¸šä»£ç†è®¾è®¡æ–¹æ¡ˆ |
| å¤æ‚å¤šæ­¥éª¤ç ”ç©¶ä»»åŠ¡ | `general-purpose` | éœ€è¦è‡ªä¸»å¤„ç†å¤æ‚ä»»åŠ¡æ—¶ |

### 2.5 ä»€ä¹ˆæ—¶å€™**ä¸**ä½¿ç”¨ Task å·¥å…·

| åº”è¯¥ä½¿ç”¨çš„å·¥å…· | ç¤ºä¾‹ |
|---------------|------|
| `Read` - è¯»å–ç‰¹å®šæ–‡ä»¶è·¯å¾„ | "è¯»å– /src/config.json" |
| `Glob` - æŒ‰æ¨¡å¼æŸ¥æ‰¾æ–‡ä»¶ï¼ˆç®€å•ï¼‰ | "æ‰¾åˆ°æ‰€æœ‰çš„ .tsx æ–‡ä»¶" |
| `Grep` - æœç´¢ç‰¹å®šç±»/å‡½æ•°å®šä¹‰ | "æ‰¾åˆ° 'UserComponent' ç±»çš„å®šä¹‰" |
| `Grep` + `Read` - æœç´¢ç‰¹å®šæ–‡ä»¶ä¸­çš„å†…å®¹ï¼ˆ1-3ä¸ªæ–‡ä»¶ï¼‰ | "åœ¨ auth.ts ä¸­æœç´¢ 'login'" |

### 2.6 Task å·¥å…·è°ƒç”¨å‚æ•°

```javascript
Task(
  subagent_type: string,        // å¿…éœ€ï¼šä»£ç†ç±»å‹
  prompt: string,               // å¿…éœ€ï¼šè¯¦ç»†ä»»åŠ¡æè¿°å’Œä¸Šä¸‹æ–‡
  description: string,          // å¿…éœ€ï¼šç®€çŸ­æè¿°(3-5è¯)
  model?: "sonnet" | "opus" | "haiku",  // å¯é€‰ï¼šé»˜è®¤ç»§æ‰¿çˆ¶æ¨¡å‹
  resume?: string,              // å¯é€‰ï¼šæ¢å¤ä¹‹å‰çš„ä»£ç†å¯¹è¯
  run_in_background?: boolean,  // å¯é€‰ï¼šåå°è¿è¡Œ
  max_turns?: number            // å¯é€‰ï¼šæœ€å¤§è½®æ¬¡
)
```

### 2.7 ä½¿ç”¨ç¤ºä¾‹

#### ç¤ºä¾‹ 1ï¼šæ¢ç´¢ä»£ç åº“
```
Task(
  subagent_type: "Explore",
  prompt: "æ¢ç´¢è¿™ä¸ªé¡¹ç›®çš„è®¤è¯ç³»ç»Ÿæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ‰¾å‡ºæ‰€æœ‰ç›¸å…³çš„æ–‡ä»¶å’Œç«¯ç‚¹",
  description: "æ¢ç´¢è®¤è¯ç³»ç»Ÿ"
)
```

#### ç¤ºä¾‹ 2ï¼šä»£ç å®¡æŸ¥
```
Task(
  subagent_type: "code-reviewer",
  prompt: "å®¡æŸ¥ src/api/auth.js æ–‡ä»¶çš„å®‰å…¨æ¼æ´å’Œæ€§èƒ½é—®é¢˜",
  description: "å®¡æŸ¥è®¤è¯APIå®‰å…¨æ€§"
)
```

#### ç¤ºä¾‹ 3ï¼šBug åˆ†æ
```
Task(
  subagent_type: "bug-analyzer",
  prompt: "åˆ†æç”¨æˆ·ç™»å½•å¤±è´¥çš„é—®é¢˜ï¼Œæ£€æŸ¥å®Œæ•´çš„æ‰§è¡Œæµç¨‹",
  description: "åˆ†æç™»å½•å¤±è´¥bug"
)
```

### 2.8 é‡è¦ä½¿ç”¨åŸåˆ™

> **"IMPORTANT: When searching for a keyword or file and you are not confident you will find the right match in the first few tries, use the Task tool"**
>
> å½“æœç´¢å…³é”®è¯æˆ–æ–‡ä»¶ä¸”ä¸ç¡®å®šç¬¬ä¸€æ¬¡å°±èƒ½æ‰¾åˆ°æ­£ç¡®åŒ¹é…æ—¶ï¼Œä½¿ç”¨ Task å·¥å…·ã€‚

> **"Use the Task tool with subagent_type=Explore instead of running search commands directly when exploring the codebase to gather context"**
>
> æ¢ç´¢ä»£ç åº“ä»¥æ”¶é›†ä¸Šä¸‹æ–‡æˆ–å›ç­”éç²¾ç¡®æŸ¥è¯¢é—®é¢˜æ—¶ï¼Œä½¿ç”¨ Task(Explore) è€Œéç›´æ¥è¿è¡Œæœç´¢å‘½ä»¤ã€‚

---

## ä¸‰ã€EnterPlanMode vs Task(Plan) çš„åŒºåˆ«

| å¯¹æ¯”ç»´åº¦ | EnterPlanMode | Task("Plan"ä»£ç†) |
|----------|---------------|------------------|
| **æœ¬è´¨** | è®©**æˆ‘è‡ªå·±**ï¼ˆä¸»å¯¹è¯ï¼‰è¿›å…¥è®¡åˆ’æ¨¡å¼ | å¯åŠ¨**æ–°çš„ç‹¬ç«‹å­ä»£ç†**æ¥è®¾è®¡è®¡åˆ’ |
| **æ‰§è¡Œè€…** | Claude Code ä¸»å¯¹è¯ | ç‹¬ç«‹çš„ Plan ä»£ç† |
| **ç”¨æˆ·äº¤äº’** | æˆ‘ç”¨ ExitPlanMode æäº¤è®¡åˆ’ç»™ä½ å®¡æ‰¹ | Plan ä»£ç†å®Œæˆåè¿”å›ç»“æœç»™æˆ‘ |
| **å…¸å‹ä½¿ç”¨é¢‘ç‡** | **ä¸»è¦æ–¹å¼** - æˆ‘å®ç°åŠŸèƒ½å‰çš„æ ‡å‡†æµç¨‹ | è¾ƒå°‘ä½¿ç”¨ - ç‰¹æ®Šæƒ…å†µä¸‹è®©ä¸“ä¸šä»£ç†è®¾è®¡æ–¹æ¡ˆ |
| **å·¥å…·è®¿é—®æƒé™** | è®¡åˆ’æ¨¡å¼ä¸‹å—é™ï¼ˆä¸èƒ½ç”¨ Task/Edit/Writeï¼‰ | ä»£ç†æœ‰ç‰¹å®šå·¥å…·é›† |
| **ä½¿ç”¨åœºæ™¯** | æˆ‘è¦å®ç°ä»£ç å‰çš„è®¡åˆ’è§„åˆ’ | éœ€è¦ä¸“ä¸šæ¶æ„å¸ˆè§†è§’è®¾è®¡æ–¹æ¡ˆ |

### 3.1 é€‰æ‹©å»ºè®®

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   éœ€è¦è®¾è®¡æ–¹æ¡ˆ   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                      â”‚
                    â–¼                                      â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚ æˆ‘æ¥å®ç°ä»£ç      â”‚                    â”‚ åªéœ€è¦æ–¹æ¡ˆå»ºè®® â”‚
           â”‚ EnterPlanMode   â”‚                    â”‚ Task(Plan)     â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å››ã€å†³ç­–æµç¨‹å›¾

### 4.1 å®Œæ•´å†³ç­–æ ‘

```
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   ç”¨æˆ·æå‡ºä»»åŠ¡   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   ä»»åŠ¡ç±»å‹åˆ¤æ–­   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                              â”‚                              â”‚
        â–¼                              â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç®€å•ä»»åŠ¡     â”‚              â”‚ éœ€è¦è®¡åˆ’çš„å®ç°  â”‚            â”‚ æ¢ç´¢/ç ”ç©¶ä»»åŠ¡ â”‚
â”‚  ç›´æ¥æ‰§è¡Œ     â”‚              â”‚ EnterPlanMode   â”‚            â”‚ Task(Explore)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                               â”‚                            â”‚
        â–¼                               â–¼                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Edit/Write    â”‚              â”‚ 1. æ¢ç´¢ä»£ç åº“   â”‚            â”‚ ä»£ç†è¿”å›ç»“æœ â”‚
â”‚ Bash          â”‚              â”‚ 2. è®¾è®¡æ–¹æ¡ˆ     â”‚            â”‚              â”‚
â”‚ Read/Glob/Grepâ”‚              â”‚ 3. æäº¤å®¡æ‰¹     â”‚            â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ç®€åŒ–å†³ç­–å›¾

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚              ç”¨æˆ·ä»»åŠ¡                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   æ˜¯ç®€å•ä»»åŠ¡å—ï¼Ÿ        â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                                    â”‚
                   YES                                  NO
                    â”‚                                    â”‚
                    â–¼                                    â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  ç›´æ¥æ‰§è¡Œ       â”‚              â”‚   æ˜¯å®ç°ä»»åŠ¡å—ï¼Ÿ       â”‚
           â”‚  Edit/Write    â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚  Bash          â”‚                         â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚                           â”‚
                                     YES                         NO
                                      â”‚                           â”‚
                                      â–¼                           â–¼
                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                             â”‚ EnterPlanMode   â”‚         â”‚ Task(Explore)â”‚
                             â”‚ æˆ– Task(Plan)   â”‚         â”‚ æˆ–å…¶ä»–ä»£ç†    â”‚
                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 ä»»åŠ¡å¤æ‚åº¦åˆ¤æ–­æ ‡å‡†

| å¤æ‚åº¦ | åˆ¤æ–­æ ‡å‡† | å¤„ç†æ–¹å¼ |
|--------|----------|----------|
| ğŸŸ¢ **ç®€å•** | å•æ–‡ä»¶ã€å•å‡½æ•°ã€æ˜ç¡®éœ€æ±‚ | ç›´æ¥æ‰§è¡Œ (Edit/Write) |
| ğŸŸ¡ **ä¸­ç­‰** | 2-3ä¸ªæ–‡ä»¶ã€éœ€è¦å°‘é‡æ¢ç´¢ | è€ƒè™‘è®¡åˆ’æˆ–å°‘é‡æ¢ç´¢ |
| ğŸ”´ **å¤æ‚** | å¤šæ–‡ä»¶ã€æ¶æ„å†³ç­–ã€éœ€æ±‚æ¨¡ç³Š | EnterPlanMode |
| ğŸ”µ **ç ”ç©¶** | æ¢ç´¢ä»£ç åº“ã€ç†è§£ç³»ç»Ÿ | Task(Explore) |

---

## äº”ã€å®æˆ˜ç¤ºä¾‹

### 5.1 ç¤ºä¾‹ 1ï¼šç®€å•ä»»åŠ¡ï¼ˆä¸ä½¿ç”¨ Planï¼‰

**ç”¨æˆ·è¯·æ±‚ï¼š**
```
"æŠŠ README.md é‡Œçš„ 'v1.0' æ”¹æˆ 'v2.0'"
```

**å¤„ç†æ–¹å¼ï¼š**
```javascript
// ç›´æ¥æ‰§è¡Œ
Read("README.md")
Edit("README.md", "v1.0", "v2.0")
```

**åŸå› ï¼š** å•è¡Œä¿®æ”¹ï¼Œéœ€æ±‚æ˜ç¡®

---

### 5.2 ç¤ºä¾‹ 2ï¼šéœ€è¦è®¡åˆ’çš„ä»»åŠ¡ï¼ˆä½¿ç”¨ EnterPlanModeï¼‰

**ç”¨æˆ·è¯·æ±‚ï¼š**
```
"æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½"
```

**å¤„ç†æ–¹å¼ï¼š**
```
1. è°ƒç”¨ EnterPlanMode
2. æ¢ç´¢ç°æœ‰ä»£ç ç»“æ„
3. æå‡ºé—®é¢˜ï¼š
   - ä½¿ç”¨ JWT è¿˜æ˜¯ Sessionï¼Ÿ
   - Token å­˜åœ¨å“ªé‡Œï¼Ÿ
   - éœ€è¦å“ªäº›ç«¯ç‚¹ï¼Ÿ
4. è®¾è®¡å®ç°æ–¹æ¡ˆ
5. ä½¿ç”¨ ExitPlanMode æäº¤è®¡åˆ’
```

**åŸå› ï¼š** æ¶æ„å†³ç­–ï¼Œå¤šç§å¯è¡Œæ–¹æ¡ˆ

---

### 5.3 ç¤ºä¾‹ 3ï¼šæ¢ç´¢ä»»åŠ¡ï¼ˆä½¿ç”¨ Task + Exploreï¼‰

**ç”¨æˆ·è¯·æ±‚ï¼š**
```
"è¿™ä¸ªé¡¹ç›®çš„é”™è¯¯å¤„ç†æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ"
```

**å¤„ç†æ–¹å¼ï¼š**
```javascript
Task(
  subagent_type: "Explore",
  prompt: "æ¢ç´¢è¿™ä¸ªé¡¹ç›®çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæ‰¾å‡ºæ‰€æœ‰ç›¸å…³çš„æ–‡ä»¶ã€ä¸­é—´ä»¶å’Œå¤„ç†å‡½æ•°",
  description: "æ¢ç´¢é”™è¯¯å¤„ç†æœºåˆ¶"
)
```

**åŸå› ï¼š** éœ€è¦å¹¿æ³›æ¢ç´¢ä»£ç åº“ï¼Œä¸æ˜¯ç²¾ç¡®æŸ¥è¯¢

---

### 5.4 ç¤ºä¾‹ 4ï¼šBug åˆ†æï¼ˆä½¿ç”¨ Task + bug-analyzerï¼‰

**ç”¨æˆ·è¯·æ±‚ï¼š**
```
"ç”¨æˆ·åé¦ˆç™»å½•æœ‰æ—¶ä¼šå¤±è´¥ï¼Œå¸®æˆ‘æŸ¥ä¸€ä¸‹åŸå› "
```

**å¤„ç†æ–¹å¼ï¼š**
```javascript
Task(
  subagent_type: "bug-analyzer",
  prompt: "åˆ†æç™»å½•æµç¨‹ä¸­å¯èƒ½å¤±è´¥çš„æ‰§è¡Œè·¯å¾„ï¼Œæ£€æŸ¥æ‰€æœ‰ç›¸å…³çš„è®¤è¯ä»£ç å’Œå¯èƒ½çš„ç«æ€æ¡ä»¶",
  description: "åˆ†æç™»å½•å¤±è´¥é—®é¢˜"
)
```

**åŸå› ï¼š** éœ€è¦æ·±åº¦åˆ†ææ‰§è¡Œæµç¨‹å’Œæ ¹å› 

---

### 5.5 ç¤ºä¾‹ 5ï¼šä»£ç å®¡æŸ¥ï¼ˆä½¿ç”¨ Task + code-reviewerï¼‰

**ç”¨æˆ·è¯·æ±‚ï¼š**
```
"æˆ‘åˆšå†™äº†ä¸€ä¸ªæ”¯ä»˜æ¨¡å—ï¼Œå¸®æˆ‘å®¡æŸ¥ä¸€ä¸‹å®‰å…¨æ€§"
```

**å¤„ç†æ–¹å¼ï¼š**
```javascript
Task(
  subagent_type: "code-reviewer",
  prompt: "å…¨é¢å®¡æŸ¥æ”¯ä»˜æ¨¡å—çš„ä»£ç ï¼Œé‡ç‚¹å…³æ³¨å®‰å…¨æ¼æ´ã€SQLæ³¨å…¥é£é™©ã€è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†",
  description: "å®¡æŸ¥æ”¯ä»˜æ¨¡å—å®‰å…¨æ€§"
)
```

**åŸå› ï¼š** **ä¸»åŠ¨ä½¿ç”¨** code-reviewer è¿›è¡Œä»£ç è´¨é‡ä¿è¯

---

## å…­ã€å¿«é€Ÿå‚è€ƒè¡¨

### 6.1 å·¥å…·é€‰æ‹©é€ŸæŸ¥è¡¨

| ä»»åŠ¡ç±»å‹ | ä½¿ç”¨å·¥å…·/ä»£ç† | ç¤ºä¾‹ |
|----------|--------------|------|
| è¯»å–æ–‡ä»¶ | `Read` | "æŸ¥çœ‹ config.json" |
| æŒ‰æ¨¡å¼æ‰¾æ–‡ä»¶ | `Glob` | "æ‰¾æ‰€æœ‰ .test.js æ–‡ä»¶" |
| æœç´¢ä»£ç ï¼ˆç²¾ç¡®ï¼‰ | `Grep` | "æ‰¾ User ç±»å®šä¹‰" |
| æœç´¢ä»£ç ï¼ˆä¸ç¡®å®šï¼‰ | `Task(Explore)` | "æ‰¾è®¤è¯ç›¸å…³çš„ä»£ç " |
| ç†è§£ç³»ç»Ÿæ¶æ„ | `Task(Explore)` | "è·¯ç”±ç³»ç»Ÿæ€ä¹ˆå·¥ä½œï¼Ÿ" |
| å®ç°æ–°åŠŸèƒ½ | `EnterPlanMode` | "æ·»åŠ è´­ç‰©è½¦" |
| ä¿®å¤ bugï¼ˆå¤æ‚ï¼‰ | `EnterPlanMode` | "ä¿®å¤æ”¯ä»˜å¤±è´¥" |
| ä¿®å¤ bugï¼ˆç®€å•ï¼‰ | ç›´æ¥æ‰§è¡Œ | "ä¿®å¤æ‹¼å†™é”™è¯¯" |
| ä»£ç å®¡æŸ¥ | `Task(code-reviewer)` | "å®¡æŸ¥å®‰å…¨æ€§" |
| è°ƒè¯•åˆ†æ | `Task(bug-analyzer)` | "åˆ†æå´©æºƒåŸå› " |
| UI è®¾è®¡ | `Task(ui-sketcher)` | "è®¾è®¡ç™»å½•é¡µå¸ƒå±€" |

### 6.2 å¤æ‚åº¦åˆ¤æ–­æ ‡å‡†

| æŒ‡æ ‡ | ç®€å• | ä¸­ç­‰ | å¤æ‚ |
|------|------|------|------|
| æ–‡ä»¶æ•°é‡ | 1 | 2-3 | >3 |
| éœ€æ±‚æ˜ç¡®åº¦ | å®Œå…¨æ˜ç¡® | å¤§éƒ¨åˆ†æ˜ç¡® | éœ€è¦æ¢ç´¢ |
| æ¶æ„å†³ç­– | æ—  | å°‘é‡ | é‡è¦å†³ç­– |
| å®ç°æ–¹å¼ | å”¯ä¸€ | å°‘æ•°é€‰æ‹© | å¤šç§æ–¹æ¡ˆ |

---

## ä¸ƒã€æœ€ä½³å®è·µ

### 7.1 å¯¹äºç”¨æˆ·

1. **æä¾›å…·ä½“ä¸Šä¸‹æ–‡** - è¶Šå…·ä½“çš„éœ€æ±‚ï¼Œè¶Šèƒ½å‡å°‘ä¸å¿…è¦çš„æ¢ç´¢
2. **æ˜ç¡®åå¥½** - å¦‚æœæœ‰æŠ€æœ¯åå¥½ï¼ˆå¦‚"ç”¨Redis"ï¼‰ï¼Œç›´æ¥è¯´æ˜
3. **åˆ†é˜¶æ®µä»»åŠ¡** - å¤æ‚ä»»åŠ¡å¯ä»¥æ‹†åˆ†æˆå¤šä¸ªå°ä»»åŠ¡

### 7.2 å¯¹äº Claude Code

1. **ä¸»åŠ¨è§„åˆ’** - ä¸ç¡®å®šæ—¶å€¾å‘äºä½¿ç”¨ EnterPlanMode
2. **å¹¶è¡Œæ‰§è¡Œ** - å¤šä¸ªç‹¬ç«‹ä»»åŠ¡å¹¶è¡Œå¤„ç†
3. **é€‰æ‹©åˆé€‚å·¥å…·** - ç²¾ç¡®æŸ¥è¯¢ç”¨ä¸“ç”¨å·¥å…·ï¼Œæ¨¡ç³ŠæŸ¥è¯¢ç”¨ Task

---

## å…«ã€å¸¸è§é—®é¢˜ (FAQ)

**Q1: ä¸ºä»€ä¹ˆä¸æ€»æ˜¯ç”¨ Plan æ¨¡å¼ï¼Ÿ**
A: ç®€å•ä»»åŠ¡ä¸éœ€è¦é¢å¤–å¼€é”€ï¼Œç›´æ¥æ‰§è¡Œæ›´é«˜æ•ˆã€‚

**Q2: Task å·¥å…·å’Œç›´æ¥ç”¨å·¥å…·æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ**
A: Task å¯åŠ¨ç‹¬ç«‹ä»£ç†ï¼Œæœ‰ä¸“é—¨çš„ä¸Šä¸‹æ–‡å’Œå·¥å…·é›†ï¼Œé€‚åˆå¤æ‚å¤šæ­¥éª¤ä»»åŠ¡ã€‚

**Q3: ä»€ä¹ˆæ—¶å€™å¿…é¡»ç”¨ Plan æ¨¡å¼ï¼Ÿ**
A: å½“å®ç°éœ€è¦ç”¨æˆ·æ‰¹å‡†çš„æ¶æ„æ›´æ”¹æ—¶ã€‚

**Q4: å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ª Task å—ï¼Ÿ**
A: å¯ä»¥ï¼Œå¹¶è¡Œæ‰§è¡Œå¤šä¸ª Task æ˜¯æ¨èçš„åšæ³•ã€‚

---

## é™„å½•ï¼šå·¥å…·æ¸…å•

### å¯ç”¨æ–‡ä»¶æ“ä½œå·¥å…·
- `Read` - è¯»å–æ–‡ä»¶
- `Write` - å†™å…¥æ–‡ä»¶
- `Edit` - ç¼–è¾‘æ–‡ä»¶
- `Glob` - æŒ‰æ¨¡å¼æŸ¥æ‰¾æ–‡ä»¶
- `Grep` - æœç´¢æ–‡ä»¶å†…å®¹

### å¯ç”¨æ‰§è¡Œå·¥å…·
- `Bash` - æ‰§è¡Œå‘½ä»¤
- `Task` - å¯åŠ¨å­ä»£ç†
- `AskUserQuestion` - å‘ç”¨æˆ·æé—®

### æ¨¡å¼åˆ‡æ¢å·¥å…·
- `EnterPlanMode` - è¿›å…¥è®¡åˆ’æ¨¡å¼
- `ExitPlanMode` - é€€å‡ºè®¡åˆ’æ¨¡å¼ï¼ˆæäº¤è®¡åˆ’ï¼‰

---

**æ–‡æ¡£ç»“æŸ**

> æœ¬æ–‡æ¡£åŸºäº Claude Code ç³»ç»Ÿæç¤ºè¯ç”Ÿæˆï¼Œå¦‚æœ‰æ›´æ–°è¯·ä»¥å®˜æ–¹æ–‡æ¡£ä¸ºå‡†ã€‚
